@using System.Net
@inject NavigationManager NavigationManager

<MudButton Href="@href" Variant="Variant.Filled" Color="Color.Primary">
    Add to VCC
</MudButton>

@code {
    [Parameter]
    public string VpmRepositoryManifestUrl { get; set; } = GlobalSettings.PublishedRepositoryManifestFileName;
    string href = "";

    protected override void OnInitialized()
    {
        var vpmRepositoryManifestUrl = NavigationManager.ToAbsoluteUri(VpmRepositoryManifestUrl).AbsoluteUri;
        href = $"vcc://vpm/addRepo?url={WebUtility.UrlEncode(vpmRepositoryManifestUrl)}";
    }
}
